{"version":3,"sources":["app/constants.ts","app/vector.ts","app/player.ts","app/index.ts"],"names":[],"mappings":"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","file":"app.7df52a49.js","sourceRoot":"..\\src","sourcesContent":["export const FIELD_WIDTH = 4000;\r\nexport const FIELD_HEIGHT = 4000;\r\nexport const SCALE = 1;\r\n\r\nexport const UPDATE_FPS = 30;\r\nexport const BG_COLOR = 'green';\r\n\r\nexport const GRID_WIDTH = 300;\r\nexport const GRID_COUNT = FIELD_WIDTH / 2 / GRID_WIDTH;\r\n\r\nexport const HUNTER_SPEED = 15;\r\nexport const HUNTER_RADIUS = 30;\r\n","export class Vec2 {\r\n  constructor(public x: number, public y: number) {}\r\n\r\n  set(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n  move(x: number, y: number) {\r\n    this.x += x;\r\n    this.y += y;\r\n  }\r\n  add(v: Vec2) {\r\n    return new Vec2(this.x + v.x, this.y + v.y);\r\n  }\r\n  sub(v: Vec2) {\r\n    return new Vec2(this.x - v.x, this.y - v.y);\r\n  }\r\n  mul(s: number) {\r\n    return new Vec2(this.x * s, this.y * s);\r\n  }\r\n  get length() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n  clone() {\r\n    return new Vec2(this.x, this.y);\r\n  }\r\n  toString() {\r\n    return `(${this.x}, ${this.y})`;\r\n  }\r\n  equal(v: Vec2) {\r\n    return this.x === v.x && this.y === v.y;\r\n  }\r\n  get unit(): Vec2 {\r\n    return this.length ? this.mul(1 / this.length) : new Vec2(0, 0);\r\n  }\r\n}\r\n","import {\r\n  FIELD_HEIGHT,\r\n  FIELD_WIDTH,\r\n  HUNTER_SPEED,\r\n  HUNTER_RADIUS,\r\n} from './constants';\r\nimport {Vec2} from './vector';\r\n\r\ninterface PlayerArgs {\r\n  ctx: CanvasRenderingContext2D;\r\n  position: Vec2;\r\n}\r\n\r\nexport class Player {\r\n  public ctx!: CanvasRenderingContext2D;\r\n  public id = Math.random() * 100000;\r\n  public position!: Vec2;\r\n  public color = `hsl(${Math.random() * 360},60%,50%)`;\r\n  public isAlive = true;\r\n  public speed: number = HUNTER_SPEED;\r\n  public radius: number = HUNTER_RADIUS;\r\n\r\n  constructor({position, ctx}: PlayerArgs) {\r\n    this.position = position;\r\n    this.ctx = ctx;\r\n  }\r\n\r\n  draw() {\r\n    this.ctx.fillStyle = this.color;\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(this.position.x, this.position.y, this.radius, 0, Math.PI * 2);\r\n    this.ctx.fill();\r\n  }\r\n\r\n  update(v: Vec2) {\r\n    if (v) {\r\n      this.position.move(v.x, v.y);\r\n      this.checkBoundary();\r\n    }\r\n  }\r\n\r\n  checkBoundary() {\r\n    if (\r\n      this.position.x - this.radius < -FIELD_WIDTH / 2 ||\r\n      this.position.x + this.radius > FIELD_WIDTH / 2 ||\r\n      this.position.y - this.radius < -FIELD_HEIGHT / 2 ||\r\n      this.position.y + this.radius > FIELD_HEIGHT / 2\r\n    ) {\r\n      this.isAlive = false;\r\n    }\r\n  }\r\n}\r\n","import {\n  BG_COLOR,\n  SCALE,\n  GRID_COUNT,\n  GRID_WIDTH,\n  FIELD_WIDTH,\n  FIELD_HEIGHT,\n  UPDATE_FPS,\n} from './constants';\nimport {Vec2} from './vector';\nimport {Player} from './player';\n\nlet isMousePressed = false;\n\nconst KeyCodsDirectionCorrespondence: Record<number, Vec2> = {\n  65: new Vec2(-10, 0), // a\n  87: new Vec2(0, -10), // w\n  68: new Vec2(10, 0), // d\n  83: new Vec2(0, 10), // s\n};\n\nconst currentDirections: Map<number, Vec2> = new Map();\n\nlet visibleWidth = window.innerWidth;\nlet visibleHeight = window.window.innerHeight;\nlet hunter: Player | null = null;\n\nconst canvas = document.getElementById('game-field') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\nlet hunterPosition = new Vec2(0, 0);\nconst mousePos = new Vec2(0, 0);\n\nconst drawCircle = (vector: {x: number; y: number}, radius: number) => {\n  ctx?.arc(vector.x, vector.y, radius, 0, Math.PI * 2);\n};\n\nconst drawLine = (\n  vectorStart: {x: number; y: number},\n  vectorEnd: {x: number; y: number}\n) => {\n  ctx?.moveTo(vectorStart.x, vectorStart.y);\n  ctx?.lineTo(vectorEnd.x, vectorEnd.y);\n};\n\nfunction draw() {\n  ctx.fillStyle = BG_COLOR;\n  ctx.fillRect(0, 0, visibleWidth, visibleHeight);\n\n  hunterPosition = hunter!.position;\n\n  ctx.save();\n\n  ctx.translate(visibleWidth / 2, visibleHeight / 2);\n  ctx.scale(SCALE, SCALE);\n  ctx.translate(-hunterPosition.x, -hunterPosition.y);\n  ctx.beginPath();\n\n  for (let i = -GRID_COUNT; i <= GRID_COUNT; i++) {\n    ctx.moveTo(i * GRID_WIDTH, -FIELD_WIDTH / 2);\n    ctx.lineTo(i * GRID_WIDTH, FIELD_WIDTH / 2);\n    ctx.moveTo(-FIELD_HEIGHT / 2, i * GRID_WIDTH);\n    ctx.lineTo(FIELD_HEIGHT / 2, i * GRID_WIDTH);\n  }\n  ctx.strokeStyle = 'rgba(255,255,255,0.4)';\n  ctx.stroke();\n\n  if (hunter?.isAlive) {\n    hunter.draw();\n  } else {\n    alert('game over');\n  }\n\n  ctx.restore();\n\n  ctx.font = '20px Arial';\n  ctx.fillStyle = 'white';\n\n  ctx.fillStyle = 'red';\n  ctx.beginPath();\n  drawCircle(mousePos, 2);\n  ctx.fill();\n\n  ctx.save();\n  ctx.beginPath();\n  ctx.translate(mousePos.x, mousePos.y);\n  ctx.strokeStyle = 'red';\n  const len = 20;\n  drawLine(new Vec2(-len, 0), new Vec2(len, 0));\n  drawLine(new Vec2(0, -len), new Vec2(0, len));\n  ctx.stroke();\n  ctx.restore();\n\n  if (hunter?.isAlive) {\n    requestAnimationFrame(draw);\n  }\n}\n\nconst init = () => {\n  hunter = new Player({\n    position: new Vec2(FIELD_WIDTH / 4, FIELD_HEIGHT / 4),\n    ctx,\n  });\n};\n\nconst initCanvas = () => {\n  visibleWidth = canvas.width = window.innerWidth;\n  visibleHeight = canvas.height = window.innerHeight;\n};\n\nfunction update() {\n  let delta: Vec2 | null = null;\n\n  if (currentDirections.size) {\n    const moveVector = Array.from(currentDirections.values()).reduce(\n      (acc: Vec2, currentVector: Vec2) => acc.add(currentVector)\n    );\n    delta = moveVector.unit.mul(hunter!.speed);\n  } else if (isMousePressed) {\n    delta = mousePos\n      .sub(new Vec2(visibleWidth / 2, visibleHeight / 2))\n      .unit.mul(hunter!.speed);\n  }\n\n  if (delta) {\n    hunter!.update(delta);\n  }\n}\n\nconst onLoad = () => {\n  initCanvas();\n  init();\n  requestAnimationFrame(draw);\n  setInterval(update, 1000 / UPDATE_FPS);\n};\n\nconst onMouseMove = (evt: any) => {\n  mousePos.set(evt.x, evt.y);\n};\n\nconst onKeyDown = (e: any) => {\n  if (!currentDirections.has(e.keyCode)) {\n    currentDirections.set(e.keyCode, KeyCodsDirectionCorrespondence[e.keyCode]);\n  }\n};\n\nconst onKeyUp = (e: any) => {\n  currentDirections.delete(e.keyCode);\n};\n\nconst onMouseDown = () => {\n  isMousePressed = true;\n};\n\nconst onMouseUp = () => {\n  isMousePressed = false;\n};\n\nwindow.addEventListener('load', onLoad);\nwindow.addEventListener('resize', initCanvas);\nwindow.addEventListener('mousedown', onMouseDown);\nwindow.addEventListener('mouseup', onMouseUp);\nwindow.addEventListener('mousemove', onMouseMove);\nwindow.addEventListener('keydown', onKeyDown);\nwindow.addEventListener('keyup', onKeyUp);\n\nexport {};\n"]}